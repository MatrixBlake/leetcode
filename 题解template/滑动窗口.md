```python
l = 0
res = 0
temp = 0
for r, num in enumerate(nums):
    更新temp
    while l <= r and 需要的条件:
        更新temp
        l += 1 #左端收缩
    ans += l - r + 1
```
